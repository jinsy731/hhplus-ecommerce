# 부하테스트 보고서

## 1. 서론

### 1.1. 테스트 배경 및 목적

본 부하 테스트는 이커머스 서비스의 핵심 기능인 **주문 및 결제 API**와 **선착순 쿠폰 발급 API**가 대규모 실시간 트래픽 환경에서도 안정적으로 동작하는지 검증하는 것을 목표로 합니다. 특히, 특정 이벤트 및 캠페인 기간 동안 예상되는 트래픽 급증 상황에서 시스템이 사전에 정의된 **성능 목표(SLI/SLO)** 를 충족하는지 확인하고, 잠재적인 병목 지점을 식별하여 서비스의 안정성 및 가용성을 확보하고자 합니다.

---

## 2. 테스트 개요

### 2.1. 문제 정의 및 사용자 규모

현재 서비스는 약 **100만 명의 가입자**를 보유하고 있으며, 이를 기반으로 추정된 일일 및 월간 활성 사용자 수는 다음과 같습니다.

* **MAU (월간 활성 사용자 수)**: 약 30만 ~ 40만 명 (전체 가입자의 30~40%)
* **DAU (일일 활성 사용자 수)**: 약 10만 ~ 15만 명 (전체 가입자의 10~15%)

일반적으로 트래픽의 약 70~80%가 **하루 중 특정 10시간(36,000초)의 피크 타임**에 집중된다고 가정합니다. 이러한 환경에서 아래 두 API의 안정적인 성능 확보는 매우 중요합니다.

* **주문/결제 API**: 실제 구매로 이어지는 핵심 트랜잭션으로, **높은 성공률과 빠른 응답속도**가 필수적입니다.
* **선착순 쿠폰 발급 API**: 이벤트 진행 시 매우 짧은 시간 동안 수천 건 이상의 요청이 동시에 집중될 수 있어, **극한의 동시성 처리 능력**이 요구됩니다.

### 2.2. 테스트 유형 및 API별 적용 매트릭스

본 테스트에서는 다음과 같은 유형의 부하 테스트를 진행하며, 각 API의 특성을 고려하여 적용 범위를 설정합니다.

| 테스트 유형     | 목적         | 설명                                                                 |
| --------------- | ------------ | -------------------------------------------------------------------- |
| **Load Test** | 안정성 검증  | 일반적인 최대 예상 부하 수준에서 시스템이 정상적으로 동작하는지 확인         |
| **Stress Test** | 한계 파악    | 시스템이 감당할 수 있는 최대 부하를 초과 시 어떤 방식으로 실패하는지 관찰        |
| **Soak Test** | 누적 안정성  | 장시간 지속적인 부하 하에서 메모리 누수, GC 병목 등 누적적인 문제 식별        |
| **Peak Test** | 순간 트래픽 처리 | 짧은 시간 동안의 급격한 요청 집중 상황을 시뮬레이션하여 시스템의 대응력 점검 |

**API별 테스트 적용 매트릭스**

| API                 | Load Test | Stress Test | Soak Test      | Peak Test |
| ------------------- | --------- | ----------- | -------------- | --------- |
| **주문/결제 API** | ✅        | ✅          | ✅             | ✅        |
| **선착순 쿠폰 발급 API** | ✅        | ✅          | ❌ (이벤트성) | ✅        |

> **참고**: 선착순 쿠폰 발급 API는 단기 이벤트성으로 사용되므로, 장시간 지속 부하를 가하는 Soak Test는 제외합니다.

---

## 3. 테스트 환경 및 대상 API

### 3.1. 테스트 대상 API 명세

| API                | HTTP Method & 경로                     | 주요 테스트 목적                               |
| ------------------ | -------------------------------------- | ---------------------------------------------- |
| 주문 및 결제 API     | `POST /api/v3/orders`                  | 트랜잭션 무결성 및 높은 TPS 환경에서의 처리 성능 검증 |
| 선착순 쿠폰 발급 API | `POST /api/v3/users/{userId}/coupons` | 이벤트성 초고동시 요청 처리 성능 검증            |

### 3.2. 주요 시스템 구성 요소

부하 테스트 결과에 영향을 미칠 수 있는 주요 시스템 구성 요소는 다음과 같습니다. 상세 설정값은 각 테스트 결과 및 병목 분석에서 기술합니다.

* 애플리케이션 서버: Apache Tomcat
* 데이터베이스 커넥션 풀: HikariCP
* 캐시/메시지 큐 (추정): Redis
* JVM: Garbage Collector (GC) 등

---

## 4. 성능 목표(SLO) 및 부하 설계

### 4.1. 주문/결제 API

#### 4.1.1. SLI/SLO 설정

* **성공률 (SLI)**: ≥ **99.0%**
* **P99 응답 시간 (SLO)**: ≤ **800ms**
* **P99.9 응답 시간 (SLO)**: ≤ **1000ms** (결제 흐름은 포인트 차감, 재고 확인 등 복수 트랜잭션 포함)
* **Error Rate**: ≤ **1.0%**
* **예상 평균 응답 시간 (참고)**: 약 1초

#### 4.1.2. 예상 트래픽 및 목표 TPS/VUser 설계

* **DAU 기반 일일 평균 요청 수**: 150,000명 (DAU) * 30% (결제 참여율) = 45,000건
* **피크 타임 평균 TPS**: 45,000건 / 36,000초 (10시간) ≈ **1.25 TPS**
* **단계별 목표 TPS**:
    * Load Test: 안정적인 운영을 위한 기본 부하 (예: 5~50 TPS 범위)
    * Peak/Stress Test: 시스템 확장성 및 한계 확인을 위한 목표 (예: **최대 500 TPS**)
* **VUser 계산 (예시: 목표 500 TPS, 평균 응답 시간 1초 가정 시)**:
    * 1 VUser 처리량: 1 req/s (응답시간 1초 기준)
    * 필요 VUser: 500 TPS / 1 (req/s/VU) = 500 VUs
    * 여유 버퍼 포함 VUser: 약 **700 VUs** (실제 테스트 시나리오별 VUser는 응답시간에 따라 유동적)

### 4.2. 선착순 쿠폰 발급 API

#### 4.2.1. SLI/SLO 설정

* **성공률 (SLI)**: ≥ **98.5%** (일부 실패는 수용 가능)
* **P99 응답 시간 (SLO)**: ≤ **600ms**
* **P99.9 응답 시간 (SLO)**: ≤ **900ms**
* **Error Rate**: ≤ **1.5%**
* **예상 평균 응답 시간 (참고)**: 200~300ms

#### 4.2.2. 예상 트래픽 및 목표 TPS/VUser 설계

* **이벤트 참여자 수**: 150,000명 (DAU) * 3% (이벤트 참여율) = 4,500명
* **총 예상 요청 수 (평균 2회 재시도 가정)**: 4,500명 * 2회 = 9,000건
* **이벤트 시간**: 3분 (180초)
* **평균 TPS**: 9,000건 / 180초 = **50 TPS**
* **단계별 목표 TPS**:
    * Load Test: 평균 부하 (예: 50 TPS)
    * Peak/Stress Test: 순간 최대 부하 (예: **최대 500 TPS 이상**)
* **VUser 계산 (예시: 목표 50 TPS, 평균 응답 시간 0.25초 가정 시)**:
    * 1 VUser 처리량: 1 / 0.25 = 4 req/s
    * 필요 VUser: 50 TPS / 4 (req/s/VU) = 12.5 VUs
    * 여유 버퍼 포함 VUser: 약 **50 VUs** (실제 테스트 시나리오별 VUser는 변동 가능)

### 4.3. 테스트 흐름 및 공통 체크 메트릭

**주문/결제 테스트 흐름**
1.  테스트 유저에게 포인트 사전 충전
2.  테스트용 상품 생성 및 재고 확보
3.  주문 생성 요청 (`POST /api/v3/orders`)
4.  결제 수행

**쿠폰 발급 테스트 흐름**
1.  테스트용 쿠폰 사전 생성 (관리자 API)
2.  사용자별 쿠폰 발급 요청
3.  (필요시) 비동기 상태 조회 API 호출로 성공 여부 검증

**공통 체크 메트릭**
* `http_req_duration` (응답 시간: avg, p90, p95, p99, p99.9, max)
* `http_req_failed` (요청 실패율)
* `http_reqs` (초당 요청 수, RPS)
* `vus` (활성 가상 사용자 수)
* `checks` (응답 코드 및 내용 검증 성공/실패율)
* 서버 시스템 리소스: CPU, Memory, Disk I/O, Network I/O
* 애플리케이션 특정 지표: Tomcat `maxThreads` 사용률, HikariCP 커넥션 풀 상태 (active, idle, pending), Redis 메모리 사용률 및 처리량, JVM GC Pause 시간 등

---

## 5. 테스트 시나리오 및 실행 결과

### 5.1. 주문/결제 API

#### 5.1.1. Load Test (주문/결제 API)

* **테스트 목적**: 평균적인 최대 예상 부하수준에서 시스템의 안정성 및 응답성을 검증합니다.
* **K6 시나리오**:
```js
stages: [
{ duration: '1m', target: 3 },   // VUser 점진 증가
{ duration: '2m', target: 5 },   // 최대 5 VUser 도달 및 유지
{ duration: '3m', target: 5 },
{ duration: '30s', target: 0 },
]
```

* **결과 요약**:

![](https://i.imgur.com/Crt5Jvt.png)

![](https://i.imgur.com/trwOUOi.png)

| 항목                               | 값                     | 비고                     |
| -------------------------------- | --------------------- | ---------------------- |
| 총 요청 수                           | 20,698                |                        |
| 실패 요청 수                          | 1 (0.00%)             | `checks_failed` 기준     |
| 최대 RPS (Peak RPS)                | 약 18.9 req/s (관찰값)    | VUser 5명 구간에서 발생       |
| 평균 HTTP 응답시간                     | **71.87ms**           |                        |
| P99 HTTP 응답시간                    | 210.69ms              |                        |
| P99.9 HTTP 응답시간                  | 375.26ms              |                        |
| 최대 HTTP 응답시간                     | **11.14s** (1건)       |                        |
| `order_create_duration` (P99.9)  | 386.66ms (최대 11.14s)  | 주문 생성 단계에서 간헐적 큰 지연 발생 |
| `order_payment_duration` (P99.9) | 364.04ms (최대 528.4ms) |                        |
| `popular_order_error_rate`       | 0.00%                 |                        |

* **그래프 분석:
    * VUser 수(회색 선)가 최대 5명으로 유지되는 동안, RPS(노란색 선, `http_req_s`)는 약 15~19 req/s 수준을 보였습니다. 이는 초기 VUser당 1 TPS 가정보다 훨씬 높은 처리량입니다 (평균 응답시간 71ms 기준, 1 VUser는 약 13-14 req/s 처리 가능).
    * P99.9 응답 시간(파란색 선, `http_req_duration_q0.999`)은 대부분 250ms 이하로 안정적이었으나, 한 차례 최대 11초 이상 치솟는 스파이크가 관찰되었습니다.
* **분석 및 해석**:
    * 평균 응답시간 71.87ms, P99.9 응답시간 375.26ms로 전반적인 성능은 SLO 목표(P99.9 ≤ 1000ms)를 만족하며 매우 양호합니다.
    * 오류율은 0.00%로 시스템 안정성 또한 높습니다.
    * 다만, `order_create_duration`에서 단일 요청이 11.14초로 비정상적인 지연을 보인 것은 잠재적 병목 지점(DB Lock, 외부 서비스 지연, GC 등)의 가능성을 시사합니다. 해당 시점의 상세 로그 분석이 필요합니다.
    * 설계된 5 VUs 환경에서 예상(5 TPS)보다 훨씬 높은 약 53 TPS (총 요청 20698 / 테스트 시간 약 390초) 가량의 평균 처리량을 보였습니다. (로그상 `http_reqs: 53.002691/s`는 테스트 구간 평균 RPS)

#### 5.1.2. Peak Test (주문/결제 API)

* **테스트 목적**: 인기 상품 한정 판매 등 짧은 순간의 급격한 트래픽 증가(목표 약 20 TPS)가 시스템에 미치는 영향을 확인합니다.
* **K6 시나리오:
```js
stages: [
{ duration: '10s', target: 10 }, // VUser 10 (목표 ~10 TPS)
{ duration: '10s', target: 15 }, // VUser 15 (목표 ~15-20 TPS)
{ duration: '10s', target: 5 },
{ duration: '10s', target: 0 }
]
```

* **결과 요약**:
  ![](https://i.imgur.com/eIXLAS8.png)

![](https://i.imgur.com/NX4uKdW.png)

| 항목                               | 값                | 비고                   |
| -------------------------------- | ---------------- | -------------------- |
| 총 요청 수                           | 1,573            |                      |
| 실패 요청 수                          | 0 (0.00%)        |                      |
| 최대 RPS (Peak RPS)                | **25.7 req/s**   | VUser 약 12~15명 구간    |
| 평균 HTTP 응답시간                     | 195.14ms         |                      |
| P99 HTTP 응답시간                    | 1.35s            | SLO(800ms) 초과 시작     |
| P99.9 HTTP 응답시간                  | **2.64s**        | SLO(1000ms) 크게 초과    |
| 최대 HTTP 응답시간                     | **3.06s**        |                      |
| `order_create_duration` (P99.9)  | 2.77s (최대 3.06s) | 주문 생성 지연 심화          |
| `order_payment_duration` (P99.9) | 1.2s (최대 1.3s)   | 결제 단계도 P99.9에서 지연 발생 |

* **그래프 분석:
    * VUser(회색 선)가 증가함에 따라 RPS(노란색 선)도 비례하여 최대 25.7 req/s까지 상승했습니다.
    * P99.9 응답 시간(파란색 선)은 VUser 증가 및 RPS 피크 시점에 맞물려 최대 2.56초 (텍스트 로그 기준 2.64초)까지 급격히 상승하는 패턴을 보였습니다.
* **분석 및 해석**:
    * 순간적인 트래픽 집중 상황에서 성공률은 100%로 유지되었으나, P99 이상 구간의 응답 시간이 SLO 기준을 초과하며 성능 저하가 관찰되었습니다.
    * 특히 `order_create_duration`에서 최대 3초 이상의 지연이 발생하여, 주문 생성 단계가 병목 지점일 가능성이 높습니다. (DB 트랜잭션, 재고 확인 로직 등 점검 필요)
    * 시스템은 단기 고부하에 일부 취약점을 드러냈으며, 응답 시간 편차가 커지는 경향을 보입니다.

#### 5.1.3. Stress Test (주문/결제 API)

* **테스트 목적**: 부하를 점진적으로 증가시켜 시스템의 한계점, 자원 고갈 또는 오류 발생 시점을 확인합니다. (최대 VUser 500명, 목표 TPS 50 이상)
* **K6 시나리오:
```js
stages: [
{ duration: '30s', target: 10 }, { duration: '30s', target: 30 },
{ duration: '30s', target: 50 }, { duration: '30s', target: 70 },
{ duration: '30s', target: 90 }, { duration: '30s', target: 100 },
{ duration: '30s', target: 150 }, { duration: '30s', target: 200 },
{ duration: '30s', target: 250 }, { duration: '30s', target: 300 },
{ duration: '30s', target: 350 }, { duration: '30s', target: 400 },
{ duration: '30s', target: 450 }, { duration: '30s', target: 500 },
{ duration: '30s', target: 0 }
]
```

* **결과 요약:

![](https://i.imgur.com/vlkRILU.png)
![](https://i.imgur.com/sc1NmNS.png)

![](https://i.imgur.com/ga23rxR.png)

![](https://i.imgur.com/pzt5lp3.png)

| 항목                               | 값                  | 비고                             |
| -------------------------------- | ------------------ | ------------------------------ |
| 총 요청 수                           | 25,862             |                                |
| 실패 요청 수                          | **316 (1.22%)**    | `checks_failed` 기준, SLO(1%) 초과 |
| 최대 RPS (Peak RPS)                | **41.8 req/s**     | VUser 약 250~300명 구간에서 관찰       |
| 평균 HTTP 응답시간                     | **3.58s**          |                                |
| P99 HTTP 응답시간                    | **17.88s**         | 심각한 성능 저하                      |
| P99.9 HTTP 응답시간                  | **19.16s**         |                                |
| 최대 HTTP 응답시간                     | **20.44s**         |                                |
| `order_create_duration` (P99.9)  | 19.28s (최대 20.44s) |                                |
| `order_payment_duration` (P99.9) | 19.06s (최대 19.81s) |                                |
| HikariCP Active conn.            | 16 (최대치 도달)        | `maxPoolSize: 16` 설정           |
| HikariCP Pending threads         | **284**            | DB 커넥션 병목 발생                   |

* **그래프 분석 :
    * VUser(회색 선)가 약 250~300명 수준에 도달하면서부터 P99.9 응답 시간(파란색 선)이 급격히 증가하여 최대 20초 수준까지 치솟았습니다.
    * RPS(노란색 선)는 약 40 req/s 수준에서 더 이상 증가하지 못하고 정체되거나 오히려 감소하는 경향을 보였습니다.
    * HikariCP 커넥션 풀 그래프에서 Active 커넥션은 최대치(16)에 도달하고 Idle 커넥션은 0이 되며, Pending Threads 수가 284개까지 급증하는 것이 확인되었습니다. 이는 명백한 DB 커넥션 풀 고갈 상황입니다.
    * 서버 로그에서는 DB 커넥션을 얻지 못해 발생하는 Timeout 오류 및 Redis 저장 공간 부족 오류 (`No space left on device` - Docker 볼륨 미지정 시 발생 가능)가 관찰되었습니다.
* **분석 및 해석**:
    * **주요 병목 지점은 DB 커넥션 풀(HikariCP)의 부족**으로 확인됩니다. `maxPoolSize=16` 설정은 VUser 300명 이상(RPS 약 40)의 부하를 감당하기에 현저히 부족했습니다.
    * 이로 인해 대다수의 요청이 DB 커넥션을 대기하며 응답 시간이 평균 3.58초, P99 구간에서는 17-19초까지 크게 지연되었습니다.
    * 실패율도 1.22%로 SLO 기준(1.0%)을 초과했습니다.
    * Redis 관련 오류는 Docker 볼륨 설정 문제로 추정되며, 부하 상황에서의 디스크 공간 부족이 추가적인 성능 저하 요인이 될 수 있습니다.

### 5.2. 선착순 쿠폰 발급 API

#### 5.2.1. Load Test (선착순 쿠폰 발급 API)

* **테스트 목적**: 평균 예상 트래픽(DAU 3% 참여, 2회 시도, 50 TPS) 수준에서 시스템 안정성 및 응답성을 검증합니다.
* **K6 시나리오 :
```js
    // 목표 VUser: 약 50명 (50 TPS @ 0.25s/req 가정)
    stages: [
     { duration: '30s', target: 25 },  // Warm-up
     { duration: '1m', target: 50 },   // 목표 VUs 도달
     { duration: '2m', target: 50 },   // 부하 유지
     { duration: '30s', target: 0 }    // 종료
    ]
```

* **결과 요약**:
  ![](https://i.imgur.com/isq4Isi.png)

| 항목                         | 값                      | 비고                    |
| ------------------------ | ---------------------- | --------------------- |
| 총 HTTP 요청 수                | 43,886                 |                       |
| HTTP 요청 실패 수               | **2,048 (4.66%)**      | `http_req_failed` 기준. |
| 최대 RPS (Peak RPS)          | 약 46 req/s (관찰값)       |                       |
| 평균 HTTP 응답시간               | **52.1ms**             |                       |
| P99 HTTP 응답시간              | 303.14ms               |                       |
| P99.9 HTTP 응답시간            | **561.44ms**           | SLO(900ms) 만족         |
| 최대 HTTP 응답시간               | 821.28ms               |                       |
| `issue_duration` (P99.9)   | 607.31ms (최대 821.28ms) |                       |
| `server_error_rate`        | 0.00%                  | 서버 내부 오류 없음           |

* **그래프 분석**:
    * VUser(회색 선)가 목표치인 50명에 도달하여 유지되는 동안 RPS(노란색 선)는 약 40~46 req/s 수준을 보였습니다. (로그의 `http_reqs: 182.603892/s`는 전체 평균치이며, 그래프상의 피크와 다를 수 있음. 여기서는 그래프 기반으로 기술)
    * P99.9 응답 시간(파란색 선)은 전반적으로 500ms 전후로 안정적으로 유지되었습니다.
    * 다만, `http_req_s_errors`(빨간 점선)로 표시된 HTTP 실패 요청이 약 4~5% 수준으로 꾸준히 발생했습니다.
* **분석 및 해석**:
    * 응답 시간(평균 52.1ms, P99.9 561.44ms)은 SLO 목표를 충분히 만족하며 매우 우수합니다.
    * `server_error_rate`는 0%로 서버 자체의 오류는 발생하지 않았습니다.

#### 5.2.2. Peak Test (선착순 쿠폰 발급 API)

* **테스트 목적**: 이벤트 오픈 직후 짧은 시간에 몰리는 초고동시성 요청(목표 500 TPS, VUser 200)에 대한 시스템의 순간 부하 대응력을 확인합니다.
* **K6 시나리오**:
```js
    // 목표 VUser: 200명 (500 TPS @ 0.25s/req 가정, 여유 포함)
stages: [
{ duration: '5s', target: 200 },  // 순간 피크
{ duration: '10s', target: 100 }, // 순간 완화
{ duration: '5s', target: 200 },  // 재피크
{ duration: '10s', target: 0 }    // 종료
]
```
* **결과 요약**:
  ![](https://i.imgur.com/VDQ4Lli.png)

| 항목                       | 값                         | 비고                                     |
| -------------------------- | -------------------------- | ---------------------------------------- |
| 총 HTTP 요청 수            | 10,045                     |                                          |
| HTTP 요청 실패 수          | **36 (0.35%)** | 매우 낮은 실패율                           |
| `issued_coupon_total` (성공) | 2,459                      |                                          |
| 최대 RPS (Peak RPS)        | **351 req/s** | 목표(500TPS)에는 미치지 못했으나 높은 처리량 |
| 평균 HTTP 응답시간         | **163.6ms** |                                          |
| P99 HTTP 응답시간          | 768.58ms                   | SLO(P99.9 900ms) 기준으로는 양호       |
| P99.9 HTTP 응답시간        | **1.08s** | SLO(900ms) 약간 초과                   |
| 최대 HTTP 응답시간         | 1.35s                      |                                          |
| `issue_duration` (P99.9)   | 1.06s (최대 1.25s)         |                                          |
| `server_error_rate`        | 0.00%                      | 서버 내부 오류 없음                      |

* **그래프 분석 (이미지 `VDQ4Lli.png` 내용 기반)**:
    * VUser(회색 선)가 200명까지 급상승하며 RPS(노란색 선)는 최대 351 req/s까지 도달했습니다.
    * P99.9 응답 시간(파란색 선)은 VUser 피크 구간에서도 비교적 안정적으로 1초 전후로 유지되었습니다.
    * HTTP 실패율은 매우 낮게 유지되었습니다.
* **분석 및 해석**:
    * 최대 351 RPS의 높은 처리량에도 불구하고 평균 응답 시간(163.6ms)은 매우 우수했으며, P99.9 응답 시간(1.08s)도 SLO 기준에서 크게 벗어나지 않았습니다.
    * HTTP 실패율(0.35%)과 서버 오류율(0.00%) 모두 매우 낮아, 순간적인 고부하에 대한 안정성이 뛰어남을 보여줍니다.

#### 5.2.3. Stress Test (선착순 쿠폰 발급 API)

* **테스트 목적**: 시스템이 수용 가능한 최대 TPS를 초과할 경우 어떤 방식으로 실패하는지, 또는 성능이 저하되는 시점을 확인합니다. (VUser 최대 250명 목표, RPS 250 이상 목표)
* **K6 시나리오**:
```js
    // VUser 최대 250명 목표, 점진적 증가
stages: [
{ duration: '10s', target: 50 },
{ duration: '10s', target: 100 },
{ duration: '10s', target: 150 },
{ duration: '10s', target: 200 },
{ duration: '10s', target: 250 }, // 최대 250 VUser
{ duration: '10s', target: 0 }
]
```

* **결과 요약**:
  ![](https://i.imgur.com/gb8R2Zr.png)
  ![](https://i.imgur.com/xCVCyag.png)

| 항목                   | 값                         | 비고                                                       |
| ---------------------- | -------------------------- | ---------------------------------------------------------- |
| 총 HTTP 요청 수        | 36,976                     |                                                            |
| HTTP 요청 실패 수      | **159 (0.43%)** |                                                            |
| 최대 RPS (Peak RPS)    | **286 req/s** | VUser 약 1600명 도달 시. (시나리오 VUser와 큰 차이)           |
| 평균 HTTP 응답시간     | **11.1s** | 심각한 지연 발생                                             |
| P99.9 HTTP 응답시간    | **12초 이상 추정** | 그래프상 명확, SLO 크게 초과                                 |
| 서버 오류 로그         | `java.io.IOException: Broken pipe` 발생 | 클라이언트 타임아웃으로 인한 응답 중단 추정                      |

* **그래프 분석**:
    * 이로 인해 RPS(노란색 선)는 최대 286 req/s까지 도달했으나, P99.9 응답 시간(파란색 선)은 10~12초 이상으로 급증하며 시스템이 부하를 감당하지 못하는 모습을 보였습니다.
    * 서버 로그에서는 `Broken pipe` 예외가 다수 발생했는데, 이는 서버가 응답을 처리하는 도중 클라이언트가 이미 연결을 종료했음을 의미합니다. 즉, 응답 지연이 매우 심해 클라이언트 측 타임아웃이 발생한 것입니다.
* **분석 및 해석**:
    * VUser가 예상(또는 설정)보다 훨씬 높은 1,600명까지 증가하면서 시스템 처리 한계를 초과했습니다.
    * 이로 인해 평균 응답 시간이 11.1초로 급증하고, 다수의 `Broken pipe` 오류가 발생하여 실질적인 서비스 장애 상황에 이르렀습니다.
    * HTTP 요청 실패율 자체는 0.43%로 낮지만, 이는 대부분의 요청이 매우 느리게라도 처리되었거나, `Broken pipe` 오류가 K6에서 실패로 카운트되지 않았을 가능성을 시사합니다.